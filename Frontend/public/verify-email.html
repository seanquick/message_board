<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Email Verification</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>

<main class="container pad narrow">
  <h1>Email Verification</h1>
  <p id="message">Verifying...</p>
</main>

<script type="module">
import { api } from './main.js';

async function verify() {
  const params = new URLSearchParams(location.search);
  const token = params.get('token');
  const el = document.getElementById('message');

  if (!token) {
    el.textContent = 'Missing verification token.';
    return;
  }

  try {
    const r = await api('/api/auth/verify-email', { params: { token } });
    el.textContent = r.message || 'Email verified!';
  } catch (e) {
    el.textContent = e?.error || 'Failed to verify email.';
  }
}

verify();
</script>

</body>
</html>
